<html>
<head></head>
<body>

<template id="my-component">
    <h1 style="color: aquamarine"> I'm a happy template </h1>
</template>

<script>
  class MyComponent extends HTMLElement {

    constructor() {
      super();
      const shadowRoot = this.attachShadow({mode:'open'});
      const doc = (document._currentScript || document.currentScript).ownerDocument;
      const template = doc.querySelector( '#my-component' ).content;
      const clone = doc.importNode( template, true );
      this.shadowRoot.appendChild(clone);
    }

    // lifecycle hooks

    connectedCallback() {
      console.log('Custom element is inserted into the DOM!');
    }

    disconnectedCallback() {
      console.log('Custom element is removed from the DOM!');
    }

    applyNewColor(color) {
      this.shadowRoot.querySelector('h1').style.color = color;
    }

    static get observedAttributes() {
      return ['my-attribute'];
    }

    attributeChangedCallback(attrName, oldVal, newVal) {
      console.log('Called whenever an attribute is added, removed or updated. ' +
        'Only attributes listed in the observedAttributes property are affected');
      switch (attrName) {
        case 'my-attribute':
          this.applyNewColor(newVal);
          break;
      }
    }



    adoptedCallback() {
      console.log('Called whenever the custom element has been moved into a new document');
    }


  }
  customElements.define('my-component', MyComponent);
</script>
</body>
</html>